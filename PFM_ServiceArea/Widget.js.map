{"version":3,"sources":["../../../widgets/PFM_ServiceArea/Widget.js"],"names":["ocultar","esto","vista","document","getElementById","style","display","flexDirection","ocultarPro","bueno","malo1","malo2","malo3","malo4","vbueno","vmalo1","vmalo2","vmalo3","vmalo4","define","declare","BaseWidget","SpatialReference","Layer","FeatureSet","ServiceAreaTask","ServiceAreaParameters","QueryTask","Query","Draw","Point","SimpleFillSymbol","SimpleLineSymbol","SimpleMarkerSymbol","Graphic","Color","on","baseClass","postCreate","inherited","arguments","console","log","onOpen","miMapa","map","miPunto","miUbicacion","dojo","byId","guardarUbicacion","graphics","clear","herramientaDibujo","activate","POINT","crearPunto","evento","geometry","miSimboloUbicacion","STYLE_SQUARE","STYLE_SOLID","add","deactivate","capa1","capa2","capa3","capa4","capa5","capa6","capa7","capa8","capa9","capa10","capa11","capa12","capa13","capa14","capa15","listacapas","errorUbicacion","hayQueSeleccionarUbicacion","errorImpedancia","hayQueSeleccionarImpedancia","impedanciaTiempoPie","tiempoPie","impedanciaDistancia","distancia","value","generarAreaServicio","capasSeleccionadas","i","length","element","checked","push","impedanciaSeleccionada","innerHTML","entidades","ubicaciones","features","tareaAreaDeServicio","parametrosAreaDeServicio","intervalo1","intervalo2","intervalo3","facilities","defaultBreaks","outSpatialReference","spatialReference","returnFacilities","impedanceAttribute","solve","resultado","simboloPoligono","forEach","serviceAreaPolygons","areaServicio","setSymbol","poligonoConsulta","setExtent","getExtent","consulta","where","outFields","returnGeometry","parametro","miURLConsulta","itemInfo","itemData","operationalLayers","url","miSimbolo","layerObject","renderer","symbol","miTareaDeConsulta","execute","geometria","simboloGenerico","punto","err","message","onClose"],"mappings":"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","file":"Widget.js","sourcesContent":["function ocultar(esto) {\r\n  vista=document.getElementById(esto).style.display;\r\n  if (vista=='none')\r\n    vista='flex';\r\n  else\r\n    vista='none';\r\n\r\n  document.getElementById(esto).style.display = vista;\r\n  document.getElementById(esto).style.flexDirection = 'column';\r\n   \r\n}\r\nfunction ocultarPro(bueno,malo1,malo2,malo3,malo4) {\r\n  var vbueno =document.getElementById(bueno).style.display;\r\n  var vmalo1 =document.getElementById(malo1).style.display;\r\n  var vmalo2 =document.getElementById(malo2).style.display;\r\n  var vmalo3 =document.getElementById(malo3).style.display;\r\n  var vmalo4 =document.getElementById(malo4).style.display;\r\n  if (vbueno == 'none'){\r\n    vbueno ='flex';\r\n    vmalo1 ='none';\r\n    vmalo2 ='none';\r\n    vmalo3 ='none';\r\n    vmalo4 ='none';\r\n  } else {\r\n    vbueno='none'\r\n  }\r\n    \r\n  \r\n  document.getElementById(bueno).style.display = vbueno;\r\n  document.getElementById(malo1).style.display = vmalo1;\r\n  document.getElementById(malo2).style.display = vmalo2;\r\n  document.getElementById(malo3).style.display = vmalo3;\r\n  document.getElementById(malo4).style.display = vmalo4;\r\n  // jimu-panel jimu-on-screen-widget-panel jimu-main-background\r\n\r\n  \r\n}\r\ndefine([\r\n  'dojo/_base/declare', \r\n  'jimu/BaseWidget',\r\n\r\n  \"esri/SpatialReference\",\r\n  \"esri/layers/layer\",\r\n  \"esri/tasks/FeatureSet\",\r\n  \"esri/tasks/ServiceAreaTask\",\r\n  \"esri/tasks/ServiceAreaParameters\",\r\n  \"esri/tasks/QueryTask\",\r\n  \"esri/tasks/query\",\r\n\r\n  \"esri/toolbars/draw\",\r\n  \"esri/geometry/Point\",\r\n  \"esri/symbols/SimpleFillSymbol\",\r\n  \"esri/symbols/SimpleLineSymbol\",\r\n  \"esri/symbols/SimpleMarkerSymbol\",\r\n  \"esri/graphic\", \r\n  \"esri/Color\",\r\n\r\n  \"dojo/on\"\r\n], function(\r\n  declare, \r\n  BaseWidget,\r\n  \r\n  SpatialReference,\r\n  Layer,\r\n  FeatureSet,\r\n  ServiceAreaTask,\r\n  ServiceAreaParameters,\r\n  QueryTask,\r\n  Query,\r\n\r\n  Draw,\r\n  Point,\r\n  SimpleFillSymbol,\r\n  SimpleLineSymbol,\r\n  SimpleMarkerSymbol,\r\n  Graphic,\r\n  Color,\r\n\r\n  on,\r\n  ) {\r\n  \r\n  return declare([BaseWidget], {\r\n\r\n    baseClass: 'pfm-service-area',//usarlo\r\n  \r\n    postCreate: function() {\r\n      this.inherited(arguments);\r\n      console.log('PFM_ServiceArea::postCreate');\r\n    },\r\n\r\n    // startup: function() {\r\n    //   this.inherited(arguments);\r\n    //   console.log('PFM_ServiceArea::startup');\r\n    // },\r\n    \r\n   \r\n    onOpen: function(){\r\n      console.log('PFM_ServiceArea::onOpen');\r\n\r\n      var miMapa = this.map;\r\n      console.log(miMapa);\r\n\r\n      var miPunto;\r\n      console.log(miPunto);\r\n\r\n      var miUbicacion;\r\n\r\n      on(dojo.byId(\"ubicacion\"), \"click\", guardarUbicacion);\r\n\r\n      function guardarUbicacion() {\r\n\r\n        miMapa.graphics.clear();\r\n\r\n        var herramientaDibujo = new Draw(miMapa);\r\n        herramientaDibujo.activate(Draw.POINT);\r\n        herramientaDibujo.on(\"draw-end\", crearPunto);\r\n\r\n        function crearPunto(evento){\r\n\r\n          miPunto = new Point(evento.geometry);\r\n\r\n          var miSimboloUbicacion = new SimpleMarkerSymbol(\r\n            SimpleMarkerSymbol.STYLE_SQUARE, \r\n            10,\r\n            new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0,0,0]), 1),\r\n            new Color([255,255,255])\r\n          );\r\n\r\n          miUbicacion = new Graphic(miPunto, miSimboloUbicacion);\r\n          miMapa.graphics.add(miUbicacion);\r\n          console.log(miPunto)\r\n          herramientaDibujo.deactivate();\r\n\r\n        };\r\n\r\n      };\r\n      \r\n      var capa1 = this.capa1\r\n      var capa2 = this.capa2\r\n      var capa3 = this.capa3\r\n      var capa4 = this.capa4\r\n      var capa5 = this.capa5\r\n      var capa6 = this.capa6\r\n      var capa7 = this.capa7\r\n      var capa8 = this.capa8\r\n      var capa9 = this.capa9\r\n      var capa10 = this.capa10\r\n      var capa11 = this.capa11\r\n      var capa12 = this.capa12\r\n      var capa13 = this.capa13\r\n      var capa14 = this.capa14\r\n      var capa15 = this.capa15\r\n      var listacapas = [capa1,capa2,capa3,capa4,capa5,capa6, capa7, capa8,capa9,capa10, capa11,capa12,capa13,capa14,capa15]\r\n      var errorUbicacion = this.hayQueSeleccionarUbicacion;\r\n      var errorImpedancia = this.hayQueSeleccionarImpedancia;\r\n\r\n      var impedanciaTiempoPie = this.tiempoPie;\r\n      var impedanciaDistancia = this.distancia;\r\n\r\n      on(dojo.byId(\"tiempoPie\"), \"click\", function(){\r\n        dojo.byId(\"intervalo1\").value = 3;\r\n        dojo.byId(\"intervalo2\").value = 6;\r\n        dojo.byId(\"intervalo3\").value = 12;\r\n      });\r\n\r\n      on(dojo.byId(\"distancia\"), \"click\", function(){\r\n        dojo.byId(\"intervalo1\").value = 250;\r\n        dojo.byId(\"intervalo2\").value = 500;\r\n        dojo.byId(\"intervalo3\").value = 1000;\r\n      });\r\n\r\n      on(dojo.byId(\"ejecutar\"), \"click\", generarAreaServicio);\r\n\r\n      function generarAreaServicio(){\r\n\r\n        var capasSeleccionadas = [];\r\n        for (let i = 0; i < listacapas.length; i++) {\r\n          const element = listacapas[i];\r\n          if (element.checked == true){capasSeleccionadas.push(element.value)};\r\n        }\r\n        // if (capa1.checked == true){capasSeleccionadas.push(capa1.value)};\r\n        // if (capa2.checked == true){capasSeleccionadas.push(capa2.value)};\r\n        // if (capa3.checked == true){capasSeleccionadas.push(capa3.value)};\r\n        // if (capa4.checked == true){capasSeleccionadas.push(capa4.value)};\r\n        // if (capa5.checked == true){capasSeleccionadas.push(capa5.value)};\r\n        // if (capa6.checked == true){capasSeleccionadas.push(capa6.value)};\r\n        // if (capa7.checked == true){capasSeleccionadas.push(capa7.value)};\r\n        // if (capa8.checked == true){capasSeleccionadas.push(capa8.value)};\r\n        // if (capa9.checked == true){capasSeleccionadas.push(capa9.value)};\r\n        // if (capa10.checked == true){capasSeleccionadas.push(capa10.value)};\r\n        // if (capa11.checked == true){capasSeleccionadas.push(capa11.value)};\r\n        // if (capa12.checked == true){capasSeleccionadas.push(capa12.value)};\r\n        // if (capa13.checked == true){capasSeleccionadas.push(capa13.value)};\r\n        // if (capa14.checked == true){capasSeleccionadas.push(capa14.value)};\r\n        // if (capa15.checked == true){capasSeleccionadas.push(capa15.value)};\r\n        console.log(capasSeleccionadas);\r\n\r\n        var impedanciaSeleccionada;\r\n        if (impedanciaTiempoPie.checked == true) {\r\n          impedanciaSeleccionada = impedanciaTiempoPie.value;\r\n        } else if (impedanciaDistancia.checked == true) {\r\n          impedanciaSeleccionada = impedanciaDistancia.value;\r\n        };\r\n\r\n        if (miPunto == null) {\r\n          errorUbicacion.innerHTML = \"Seleccione una ubicación desde la que calcular el área de servicio.\"\r\n        } else {\r\n\r\n          errorUbicacion.innerHTML = \"\"\r\n          \r\n          var entidades = [];\r\n          entidades.push(miUbicacion);\r\n\r\n          var ubicaciones = new FeatureSet();\r\n          ubicaciones.features = entidades\r\n\r\n          tareaAreaDeServicio = new ServiceAreaTask(\"https://formacion.esri.es/server/rest/services/RedMadrid/NAServer/Service%20Area\");\r\n\r\n          parametrosAreaDeServicio = new ServiceAreaParameters();\r\n\r\n          if (impedanciaSeleccionada == \"distancia\") {\r\n            var intervalo1 = dojo.byId(\"intervalo1\").value;\r\n            var intervalo2 = dojo.byId(\"intervalo2\").value;\r\n            var intervalo3 = dojo.byId(\"intervalo3\").value;\r\n            errorImpedancia.innerHTML = \"\";\r\n          } else if (impedanciaSeleccionada == \"tiempoPie\") {\r\n            var intervalo1 = (dojo.byId(\"intervalo1\").value)*(250/3);\r\n            var intervalo2 = (dojo.byId(\"intervalo2\").value)*(250/3);\r\n            var intervalo3 = (dojo.byId(\"intervalo3\").value)*(250/3);\r\n            errorImpedancia.innerHTML = \"\";\r\n          } else {\r\n            errorImpedancia.innerHTML = \"Seleccione una impedancia para calcular el área de servicio\";\r\n            return;\r\n          };\r\n\r\n          parametrosAreaDeServicio.facilities = ubicaciones;\r\n          parametrosAreaDeServicio.defaultBreaks = [intervalo1, intervalo2, intervalo3];\r\n          parametrosAreaDeServicio.outSpatialReference = miMapa.spatialReference;\r\n          parametrosAreaDeServicio.returnFacilities = false;\r\n          parametrosAreaDeServicio.impedanceAttribute = \"Length\";\r\n\r\n          tareaAreaDeServicio.solve(parametrosAreaDeServicio, function(resultado){\r\n              \r\n            var simboloPoligono = new SimpleFillSymbol(\r\n              \"solid\",  \r\n              new SimpleLineSymbol(\"solid\", new Color([255,255,255]), 1),\r\n              new Color([255,0,0,0.25])\r\n            );\r\n              \r\n            dojo.forEach(resultado.serviceAreaPolygons,function(areaServicio){\r\n  \r\n              areaServicio.setSymbol(simboloPoligono);\r\n              miMapa.graphics.add(areaServicio);\r\n  \r\n            });\r\n  \r\n            var poligonoConsulta = resultado.serviceAreaPolygons[0].geometry;\r\n            miMapa.setExtent(poligonoConsulta.getExtent(), true);\r\n  \r\n            var consulta = new Query();\r\n            consulta.where = \"1=1\";\r\n            consulta.outFields = [\"*\"];\r\n            consulta.geometry = poligonoConsulta;\r\n            consulta.returnGeometry = true;\r\n            consulta.outSpatialReference = new SpatialReference(102100);\r\n\r\n            dojo.forEach(capasSeleccionadas, function(parametro){\r\n\r\n              var miURLConsulta = miMapa.itemInfo.itemData.operationalLayers[parametro].url;\r\n              var miSimbolo = miMapa.itemInfo.itemData.operationalLayers[parametro].layerObject.renderer.symbol;\r\n\r\n              var miTareaDeConsulta = new QueryTask(miURLConsulta);\r\n              miTareaDeConsulta.execute(consulta, function(resultado) {\r\n  \r\n                if (resultado.features.length > 0) {\r\n  \r\n                  for (var i = 0; i < resultado.features.length; i++){\r\n  \r\n                    var geometria = resultado.features[i].geometry;\r\n\r\n                    var simboloGenerico = new SimpleMarkerSymbol(\r\n                      SimpleMarkerSymbol.STYLE_SQUARE, \r\n                      10,\r\n                      new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0,0,0]), 1),\r\n                      new Color([0,0,0])\r\n                    );\r\n  \r\n                    punto = new Graphic(geometria, miSimbolo);\r\n  \r\n                    miMapa.graphics.add(punto);\r\n  \r\n                  };\r\n                    \r\n                }; \r\n  \r\n              });\r\n\r\n            });\r\n\r\n            miPunto = null;\r\n            impedanciaSeleccionada = \"\";\r\n  \r\n          }, function(err){\r\n            console.log(err.message);\r\n          });\r\n\r\n        }\r\n      \r\n      };\r\n\r\n    },\r\n\r\n    onClose: function(){\r\n      console.log('PFM_ServiceArea::onClose');\r\n\r\n      this.map.graphics.clear();\r\n\r\n    },\r\n\r\n    // onMinimize: function(){\r\n    //   console.log('PFM_ServiceArea::onMinimize');\r\n    // },\r\n\r\n    // onMaximize: function(){\r\n    //   console.log('PFM_ServiceArea::onMaximize');\r\n    // },\r\n\r\n    // onSignIn: function(credential){\r\n    //   console.log('PFM_ServiceArea::onSignIn', credential);\r\n    // },\r\n\r\n    // onSignOut: function(){\r\n    //   console.log('PFM_ServiceArea::onSignOut');\r\n    // }\r\n\r\n    // onPositionChange: function(){\r\n    //   console.log('PFM_ServiceArea::onPositionChange');\r\n    // },\r\n\r\n    // resize: function(){\r\n    //   console.log('PFM_ServiceArea::resize');\r\n    // }\r\n\r\n    //methods to communication between widgets:\r\n\r\n  });\r\n\r\n});\r\n"]}